<!doctype html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
  <link rel="icon" href="imge/Designer__36_-removebg-preview.png">
  <title>Youns Three</title>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <link href="css/style.css" rel="stylesheet">
  <link href="css/all.css" rel="stylesheet">

</head>

<body>
  <header>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand" href="index.html">ùí∏ùìÅ‚Ñ¥ùìâùíΩ‚ÑØùìà</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="cart.html">Cart</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                aria-expanded="false">
                Dropdown
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">Action</a></li>
                <li><a class="dropdown-item" href="#">Another action</a></li>
                <li>
                  <hr class="dropdown-divider">
                </li>
                <li><a class="dropdown-item" href="#">Something else here</a></li>
              </ul>
            </li>
          </ul>
          <ul class="user-form" id="user-form">
            <li class="iconUser">
              <i class="fa-solid fa-circle-user "></i>
              <div class="UserDataDiv rounded">
                <p class="m-3"><i class="fa-solid fa-circle-user"></i> Hi, <span>Yousef Ahmed</span></p>
                <p class="datauser1 border-bottom border-dark-subtle"><i class="fa-solid fa-qrcode"></i> <span>Account
                    Details</span> </p>
                <p class="datauser2 border-bottom border-dark-subtle "><i
                    class="fa-solid fa-address-card"></i><span>Addresses</span></p>
                <p class="datauser3 border-bottom border-dark-subtle"><i class="fa-solid fa-eye"></i> <span>Reset Your
                    password</span> </p>
                <p class="datauser4 "><i class="fa-solid fa-arrow-right-from-bracket"></i> <a
                    class="p_logout p-2 text-dark-emphasis" href="login.html">Log Out</a> </p>
              </div>
            </li>
            <li> <a href="favourite.html"><i class="fa-regular fa-heart"></i></a> </li>
            <li class="btn text-decoration-none"><a href="login.html" id="user_data">Log Out</a></li>
            <li class="shoping_cart">
              <i class="z-3 fas fa-shopping-cart cart"></i>
              <div class="cart_product">
                <div class="up-write w-100">
                  <p class="fw-bold"><i class="fas fa-shopping-bag shopping-bag-2"></i> MY BAG</p>
                  <p class="fw-bold"> Total Price: <span id="Total_price">0</span> $</p>
                  <div class="cart-summary">
                    <span id="cartTotalCount">0</span> items in cart
                  </div>
                </div>
                <div class="Write mt-3 mb-3">
                  <p class="bg-danger">Total Price:<span
                      style="display: inline-block; margin-left:200px; padding:0  20px;" id="Total_price">0</span>$</p>
                  <div class="line mt-3 mb-2"></div>
                </div>
              </div>
            </li>
            <!-- <li class="btn text-decoration-none"><a href="login.html" id="logout">Log Out</a></li> -->
          </ul>
          <form class="d-flex" role="search" id="links">
            <button class="btn btn-outline-dark me-3 btn-login" type="submit"><a class="btn-dw p-3"
                href="login.html">Login</a></button>
            <button class="btn btn-outline-dark me-3 btn-regiter" type="submit"><a class="btn-dw p-3"
                href="Register.html">Register</a></button>
          </form>
        </div>
      </div>
    </nav><!-- NAV -->
  </header>







  <div class="container-fluid page_cart">
    <div class="products_cart">
      <h3 class="fw-light mb-5">YOUR CART</h3>
      <p>Your product(10)</p>
      <span><i class="fas fa-box-open"></i> Delivered by Company .. </span>
      <div class="product_Draw">
      <div class="allDraws ">
        <div class="itemcart container" id="write2">
          <!-- <div class="container_detials_1">
            <img id="img_cart" src="img/Designer (5).jpeg" alt="">
          </div>
          <div class="container_detials_2">
            <p>Company </p>
            <p> Price: 699$</p>
            <p>Size: XXl</p>
            <p>Color: Emrald</p>
            Quantity
            <div class=" d-inline-block counter-items ms-3 ">

              <button class="decrease bg-body border-0 border-end ">-</button>
              <div style="width: 40px; " class="d-inline countert">0</div>
              <button class="increasement bg-body border-0 border-start">+</button>
            </div>
            <span class="ms-5 ">Total price: <p
                class=" d-inline-block p-1 border-bottom border-start border-end rounded-5 border-black  "> 2299$</p>
            </span>
          </div>
          <i class="far fa-trash-alt d-inline-block ms-auto mb-auto m-4 fs-5  " id="remove_cart"></i> -->


        </div><!-- Cart Product -->



      </div><!-- allDraws -->

      
        <!-- --------------             Pay   ------------------------------ -->
        <div class=" pay container-fluid mt-3">
          <p class="fs-4">Order Summary</p>
          <span class="subtotal checkout_p">
            <p>Subtotal</p>
            <p> <span id="Total_price2">300</span> $</p>
          </span>
          <span class="discount checkout_p">
            <p>Discount</p>
            <p> <span id="dicount">-120</span>$</p>
          </span>
          <hr>
          <span class="checkout_p">
            <p>Total</p>
            <p> <span id="finalPrice">300</span> $</p>
          </span>
          <span class=" text-end">
            <p class="fs-4 ">Discount Included</p>
            <span class="fw-semibold discount checkout_Dis">
              <p>opening <span id="discount_1">20</span>%</p>

              <p>- <span id="fristDiscount">80</span>$</p>
            </span>
          </span>

          <span class="fw-semibold discount checkout_Dis">
            <p>Winter <span id="discount_2">10</span>%</p>
            <p>- <span id="secondDiscount">40</span>$</p>
          </span>
          <button class="btn btn-dark checkout_cart">Checkout</button>
          <button class="btn btn-light checkout_cart border mt-2"><i>PayPal</i> </button>

        </div> <!-- ksdfgsdfhg -->
     
      </div><!-- product_Draw -->
    </div><!-- products_cart -->
  </div><!-- page_cart -->
  <!-- <div class="proData bg-warning" style="width: 100%; height: 900px;">Hello</div> -->




</body>
<script src="js/register.js"></script>
<script src="js/login.js"></script>
<!-- <script src="js/cartshoping.js"></script> -->
<!-- <script src="js/cart.js"></script> -->

<script>
  let allproduct = document.querySelector(".allDraws");
let products = [
  { id: 1, title: "Hody Cvoms", imgurl: "img/Designer (8).jpeg", color: "grey", price: 549  , category: "clothes" },
  { id: 2, title: "TMalo 24nd Cvoms", imgurl: "img/Designer (4).jpeg", color: "grey", price: 899  ,category: "clothes"},
  { id: 3, title: "TMalo 24nd Cvoms", imgurl: "img/Designer (14).jpeg", color: "grey", price: 499,category: "shoes" },
  { id: 4, title: "Fghd ou11 Hop", imgurl: "img/Designer (20).jpeg", color: "grey", price: 1399,category: "accessories" },
  { id: 5, title: "Soeiur 13p dsmKs", imgurl: "img/Designer (5).jpeg", color: "grey", price: 1599  ,category: "sport"},
  { id: 6, title: "pbad 56tm fnim", imgurl: "img/Designer (6).jpeg", color: "grey", price: 1199, category: "shoes"},
  { id: 7, title: "SSH23SAER19713TM1 - Blue", imgurl: "img/Designer RM1.png", color: "black", price: 1200 ,category: "accessories"},
  { id: 8, title: "SCJ250 - Black", imgurl: "img/gens (2).png", color: "black", price: 1200 ,category: "gens"},
  { id: 9, title: "SSH160 - Black", imgurl: "img/gens (3).png", color: "black", price: 1200 ,category: "gens"},
  { id: 10, title: "WEK168 - black", imgurl: "img/gens (4).png", color: "black", price: 1200 ,category: "gens"},
  { id: 11, title: "MST146 - Black", imgurl: "img/gens (1).png", color: "black", price: 1200 ,category: "gens"},
  { id: 12, title: "POD56 - white", imgurl: "img/shose (2).png", color: "black", price: 1200 ,category: "gens"},
  { id: 13, title: "MS96 - white", imgurl: "img/shose (4).png", color: "black", price: 1200 ,category: "gens"},
  { id: 14, title: "ASD56 - Black", imgurl: "img/shose (3).png", color: "black", price: 1200 ,category: "gens"},
  { id: 15, title: "BAD43 - white", imgurl: "img/shose (1).png", color: "black", price: 1200 ,category: "gens"},
];




let cart_productDiv = document.querySelector(".Write");

// Add------------------------------------------------
function addToCart(id) {
  let choosenItem = products.find((item) => item.id === id);

  let cartItems = JSON.parse(localStorage.getItem("cartItems")) || [];

  let existingItem = cartItems.find((item) => item.id === id);
  if (existingItem) {
    existingItem.quantity += 1;  
  } else {
    cartItems.push({ ...choosenItem, quantity: 1 }); //
  }

 
  localStorage.setItem("cartItems", JSON.stringify(cartItems));


  renderCartItems();
}



// ------------------------------ delete from cart -----------------------------------
document.addEventListener("click", (event) => {
  if (event.target.classList.contains("delete_Cart")) {
    console.log("ID to delete:", event.target.dataset.id);
    const productId = event.target.dataset.id;
    const productElement = document.getElementById(`cart_item_${productId}`);
    
    if (productElement) {
     
      
      setTimeout(() => {
        deleteFromCart(productId);
        location.reload(); 
      }, 500); 
    } else {
      console.error("ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿßŸÑÿπŸÜÿµÿ±", productId);
    }
  }
});

function deleteFromCart(id) {
  let cartItems = JSON.parse(localStorage.getItem("cartItems")) || [];
  cartItems = cartItems.filter((item) => item.id !== parseInt(id)); 
  localStorage.setItem("cartItems", JSON.stringify(cartItems));
 
}


// ------------------------------ delete from cart -----------------------------------




function renderCartItems() {
  cart_productDiv.innerHTML = ""; 
  let cartItems = JSON.parse(localStorage.getItem("cartItems")) || [];

  cartItems.forEach((item) => {
    cart_productDiv.innerHTML += `
          <div class="line mt-3 mb-2"></div>
          <div class="sides" id="cart_item_${item.id}">
              <div class="side1">
                  <img src="${item.imgurl}" alt="" style="width: 150px; height: 250px;">
              </div>
              <div class="side2 ms-4">
                  <p class="mt-5">${item.title}</p>



                    <div class="d-inline-block counter-items  border-blackborder-1">
                        <button class="decrease decreasecss  border-0" data-id="${item.id}">-</button>
                        <div id="countert_${item.id}" style="width: 40px;" class="border-0 d-inline countert">${item.quantity}</div>
                        <button class="increasement z-3  increasmentcss  border-0" data-id="${item.id}">+</button>
                    </div>

             


                  <br>
                  <span>Price: <span class="item_price" id="item_price_${item.id}">${item.price * item.quantity}</span>$</span>
              </div>
          </div>`;
  });

  let Cartpromax = document.querySelector(".allDraws")

  cartItems.forEach((item) => {
    Cartpromax.innerHTML += `
       <div class="itemcart container" id="write2">
         <div class="container_detials_1${item.id}">
<img id="img_cart" src="${item.imgurl}" alt="">
</div>
<div class="container_detials_2">
  <p>${item.title} </p>
  <p> Price: ${item.price}$</p>
  <p>Size:${item.size}</p>
  <p>Color: Emrald</p>
  Quantity
  <div class=" d-inline-block counter-items ms-3 ">

  <button class="decrease decreasecss  border-0 " data-id="${item.id}">-</button>
  <div id="countert2_${item.id}" style="width: 40px;" class="d-inline countert">${item.quantity}</div>
    <button class="increasement increasmentcss border-0" data-id="${item.id}">+</button>  
    
  

    
  </div>
      <p class=" p-1 " id="item_price2_${item.id}" >${item.price * item.quantity} $</p>

</div>
          

<i class="fa-solid fa-xmark d-inline-block ms-auto mb-auto m-3 fs-5   delete_Cart" data-id="${item.id}"></i>

</div>`;
  });

  updateCartTotal(); 
}


function updateQuantity(id, updataCount) {
  const counter = document.getElementById(`countert_${id}`);
  const counter2 = document.getElementById(`countert2_${id}`);

  const itemPrice = document.getElementById(`item_price_${id}`);
  const itemPrice2 = document.getElementById(`item_price2_${id}`);
  const product = products.find((item) => item.id === id);

  let currentCount = parseInt(counter.textContent);
  let newCount = currentCount + updataCount;

  
  if (newCount < 1) return;

 
  let counter_22 = [counter, counter2]
  counter_22.forEach((counter_22 => {
    counter_22.textContent = newCount;
  }))
  
  const totalPrice = newCount * product.price;
  itemPrice.textContent = totalPrice.toFixed(2);
  itemPrice2.textContent = totalPrice.toFixed(2);

  
  updateCartTotal();
}



function updateCartTotal() {
  const allItemPrices = document.querySelectorAll(".item_price");
  let totalCartPrice = 0;

  allItemPrices.forEach((priceElem) => {
    totalCartPrice += parseFloat(priceElem.textContent);
  });

  document.getElementById("Total_price").innerText = totalCartPrice.toFixed(2);
  var xprice = document.getElementById("Total_price2").innerText = totalCartPrice.toFixed(2);
  let discount_1 = parseInt(document.getElementById("discount_1").textContent)
  let discount_2 = parseInt(document.getElementById("discount_2").textContent)
  let totalDiscount = discount_1 + discount_2
  document.getElementById("finalPrice").innerText = (addDiscount(xprice, totalDiscount))
}


let homeandcart = [cart_productDiv, allproduct]
homeandcart.forEach((homeandcart) => {
  homeandcart.addEventListener("click", (event) => {
    const target = event.target;
    if (target.classList.contains("decrease")) {
      const id = parseInt(target.dataset.id);
      updateQuantity(id, -1);
    } else if (target.classList.contains("increasement")) {
      const id = parseInt(target.dataset.id);
      updateQuantity(id, 1);
    }
  });
})




function check() {
  if (localStorage.getItem("username")) {
    window.location = "login.html"
  }
  else {
    window.location = "cart.html"
  }
}

let shoppingCartIcon = document.querySelector(".cart")
let cartsProducts = document.querySelector(".cart_product")
shoppingCartIcon.addEventListener("click", opencart)

function opencart() {
  if (cart_productDiv.innerHTML != "") {
    console.log("ÿπÿßÿ¥ Ÿäÿß ŸäŸàŸÜÿ≥ 2")
    if (cartsProducts.style.display == "block") {
      cartsProducts.style.display = "none"
    } else {
      cartsProducts.style.display = "block"
    }
  }
}

let nameDuser = document.querySelector("#user_data")
let userinfo = document.querySelector("#user-form")
let links = document.querySelector("#links")


if (localStorage.getItem("username")) {
  links.remove()
  userinfo.style.display = "flex";
  nameDuser.innerHTML = localStorage.getItem("username")
  console.log("hello home")

}


// Discount
function addDiscount(totalPrice, DiscountRate) {
  if (DiscountRate < 0 || DiscountRate > 100) {
    console.error("invalid discount percentage")
    return totalPrice;
  }

  const discountAmount = (totalPrice * DiscountRate) / 100;
  const discountedPrice = totalPrice - discountAmount;
  document.getElementById("dicount").innerText = discountAmount.toFixed(2);
  let discount_1 = parseInt(document.getElementById("discount_1").textContent)
  let discount_2 = parseInt(document.getElementById("discount_2").textContent)


  let fristDiscount = (totalPrice * discount_1) / 100;
  let secondDiscount = (totalPrice * discount_2) / 100;


  document.getElementById("fristDiscount").innerText = fristDiscount.toFixed(2);
  document.getElementById("secondDiscount").innerText = secondDiscount.toFixed(2);

  return discountedPrice.toFixed(2)


}




renderCartItems()

</script>




</html>